<!-- Step 1 – Forgot Password -->
<section *ngIf="step === 1" class="max-w-md mx-auto bg-white p-6 rounded-2xl shadow-xl mt-16">
  <h1 class="text-emerald-500 text-center text-3xl font-bold mb-6">Forgot Password</h1>
  
  <form [formGroup]="forgotPasswordForm" (ngSubmit)="ForgetForm()">
    <div class="relative mb-5">
      <input type="email" id="email" formControlName="email" placeholder="Enter your email"
             class="w-full border border-gray-300 rounded-lg p-3 focus:border-emerald-500 focus:ring-emerald-300 focus:ring-1 transition" />
      <label for="email" class="absolute left-3 top-0 text-gray-400 text-sm"></label>
    </div>

    <div *ngIf="forgotPasswordForm.get('email')?.errors && forgotPasswordForm.get('email')?.touched"
         class="bg-red-100 text-red-700 p-3 rounded mb-4 text-sm">
      <p *ngIf="forgotPasswordForm.get('email')?.hasError('required')">Email is required</p>
      <p *ngIf="forgotPasswordForm.get('email')?.hasError('email')">Invalid email format</p>
    </div>

    <button type="submit"
            class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-3 rounded-full shadow-md flex justify-center items-center gap-2 transition">
      Send Email
      <i *ngIf="isLoading" class="fas fa-spinner fa-spin"></i>
    </button>
  </form>
</section>

<!-- Step 2 – Reset Code -->
<section *ngIf="step === 2" class="max-w-md mx-auto bg-white p-6 rounded-2xl shadow-xl mt-16">
  <h1 class="text-emerald-500 text-center text-3xl font-bold mb-6">Reset Code</h1>
  
  <form [formGroup]="resetCodeForm" (ngSubmit)="CodeForm()">
    <div class="relative mb-5">
      <input type="text" id="resetCode" formControlName="resetCode" placeholder="Enter reset code"
             class="w-full border border-gray-300 rounded-lg p-3 focus:border-emerald-500 focus:ring-emerald-300 focus:ring-1 transition" />
      <label for="resetCode" class="absolute left-3 top-0 text-gray-400 text-sm"></label>
    </div>

    <div *ngIf="resetCodeForm.get('resetCode')?.errors && resetCodeForm.get('resetCode')?.touched"
         class="bg-red-100 text-red-700 p-3 rounded mb-4 text-sm">
      <p *ngIf="resetCodeForm.get('resetCode')?.hasError('required')">Code is required</p>
      <p *ngIf="resetCodeForm.get('resetCode')?.hasError('pattern')">Code is invalid</p>
    </div>

    <button type="submit"
            class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-3 rounded-full shadow-md flex justify-center items-center gap-2 transition">
      Send Code
      <i *ngIf="isLoading" class="fas fa-spinner fa-spin"></i>
    </button>
  </form>
</section>

<!-- Step 3 – New Password -->
<section *ngIf="step === 3" class="max-w-md mx-auto bg-white p-6 rounded-2xl shadow-xl mt-16">
  <h1 class="text-emerald-500 text-center text-3xl font-bold mb-6">New Password</h1>
  
  <form [formGroup]="restPasswordForm" (ngSubmit)="PasswordForm()">
    <div class="relative mb-5">
      <input type="email" id="email" formControlName="email" placeholder="Enter your email"
             class="w-full border border-gray-300 rounded-lg p-3 focus:border-emerald-500 focus:ring-emerald-300 focus:ring-1 transition" />
      <label for="email" class="absolute left-3 top-0 text-gray-400 text-sm"></label>
    </div>

    <div *ngIf="restPasswordForm.get('email')?.errors && restPasswordForm.get('email')?.touched"
         class="bg-red-100 text-red-700 p-3 rounded mb-4 text-sm">
      <p *ngIf="restPasswordForm.get('email')?.hasError('required')">Email is required</p>
      <p *ngIf="restPasswordForm.get('email')?.hasError('email')">Invalid email format</p>
    </div>

    <div class="relative mb-5">
      <input type="password" id="newPassword" formControlName="newPassword" placeholder="Enter new password"
             class="w-full border border-gray-300 rounded-lg p-3 focus:border-emerald-500 focus:ring-emerald-300 focus:ring-1 transition" />
      <label for="newPassword" class="absolute left-3 top-0 text-gray-400 text-sm"></label>
    </div>

    <div *ngIf="restPasswordForm.get('newPassword')?.errors && restPasswordForm.get('newPassword')?.touched"
         class="bg-red-100 text-red-700 p-3 rounded mb-4 text-sm">
      <p *ngIf="restPasswordForm.get('newPassword')?.hasError('required')">Password is required</p>
      <p *ngIf="restPasswordForm.get('newPassword')?.hasError('pattern')">Password must be 6-20 characters</p>
    </div>

    <button type="submit"
            class="w-full bg-emerald-500 hover:bg-emerald-600 text-white font-semibold py-3 rounded-full shadow-md flex justify-center items-center gap-2 transition">
      Send New Password
      <i *ngIf="isLoading" class="fas fa-spinner fa-spin"></i>
    </button>
  </form>
</section>
