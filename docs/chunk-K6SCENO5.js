import{$ as x,Db as I,G as f,Gb as y,H as o,Hb as w,Ib as W,Jb as T,K as l,Kb as O,Lb as k,M as g,R as h,Wa as D,_,aa as C,ba as c,ca as r,da as s,ea as u,kb as P,ma as v,na as S,q as m,xa as n,ya as p,za as b}from"./chunk-GA7MX5GQ.js";import"./chunk-4CLCTAJ7.js";function A(a,i){if(a&1&&u(0,"img",16),a&2){let e=S().$implicit;c("src",e,f)}}function B(a,i){a&1&&h(0,A,1,1,"ng-template",5)}var E=class a{constructor(i,e,t){this._CartService=i;this.toastr=e;this._WishlistService=t}customOptions={loop:!0,mouseDrag:!0,touchDrag:!0,pullDrag:!0,dots:!1,autoplay:!0,navSpeed:700,navText:["",""],responsive:{0:{items:1}},nav:!0};productId;productDetails={};_ActivatedRoute=m(P);_ProductsService=m(O);ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:i=>{this.productId=i.get("p_id"),this._ProductsService.getSpecificProduct(this.productId).subscribe({next:e=>{this.productDetails=e.data,console.log(e.data),this._WishlistService.GetLoggedUserWishlist().subscribe({next:t=>{this.productDetails.inWishlist=t.data.some(d=>d._id===this.productDetails._id)},error:t=>console.log(t)})},error:e=>{console.log(e)}})}})}addToCart(i){this._CartService.AddProductToCart(i).subscribe({next:e=>{console.log(e),this._CartService.cartCount.next(e.numOfCartItems),console.log("cart count in service",this._CartService.cartCount),this.toastr.success(e.message,e.status,{timeOut:3e3,closeButton:!0,progressBar:!0})}})}toggleWishlist(i){i.inWishlist?(i.inWishlist=!1,this._WishlistService.RemoveProductFromWishlist(i._id).subscribe({next:e=>{this.toastr.info(e.message,e.status,{timeOut:2e3,closeButton:!0,progressBar:!0})},error:e=>{console.log(e)}})):(i.inWishlist=!0,this._WishlistService.AddProductToWishlist(i._id).subscribe({next:e=>{this.toastr.success(e.message,e.status,{timeOut:2e3,closeButton:!0,progressBar:!0})},error:e=>{console.log(e),i.inWishlist=!1}}))}static \u0275fac=function(e){return new(e||a)(l(y),l(I),l(k))};static \u0275cmp=g({type:a,selectors:[["app-p-details"]],decls:23,vars:6,consts:[[1,"main-section","py-14"],[1,"container-auto"],[1,"flex","flex-wrap","items-center"],[1,"w-full","md:w-1/2","lg:w-1/4","relative"],[3,"options"],["carouselSlide",""],[1,"fa","fa-heart","absolute","top-10","right-3","text-xl","cursor-pointer","z-50",3,"click","ngClass"],[1,"w-full","h-50","md:w-1/2","lg:w-2/3","flex","flex-col","justify-between","p-5"],[1,"text-3xl","font-bold","text-emerald-500","mb-3"],[1,"text-gray-700","mb-5"],[1,"flex","items-center","justify-between","mb-5"],[1,"text-xl","font-semibold","text-gray-800"],[1,"flex","items-center","gap-1","text-yellow-400"],[1,"fas","fa-star"],[1,"text-gray-800","font-medium"],[1,"w-full","text-2xl","my-4","md:w-1/3","bg-emerald-500","text-white","font-semibold","py-3","rounded-lg","hover:bg-emerald-600","transition-all","duration-300",3,"click"],["alt","",1,"w-100","h-130","py-10","object-cover","rounded",3,"src"]],template:function(e,t){e&1&&(r(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"owl-carousel-o",4),x(5,B,1,0,null,5,_),s(),r(7,"i",6),v("click",function(j){return t.toggleWishlist(t.productDetails),j.stopPropagation()}),s()(),r(8,"div",7)(9,"div")(10,"h1",8),n(11),s(),r(12,"p",9),n(13),s(),r(14,"div",10)(15,"span",11),n(16),s(),r(17,"div",12),u(18,"i",13),r(19,"span",14),n(20),s()()()(),r(21,"button",15),v("click",function(){return t.addToCart(t.productDetails._id)}),n(22," Add to Cart "),s()()()()()),e&2&&(o(4),c("options",t.customOptions),o(),C(t.productDetails.images),o(2),c("ngClass",t.productDetails.inWishlist?"text-red-600":"text-black"),o(4),p(t.productDetails.title),o(2),p(t.productDetails.description),o(3),b("",t.productDetails.price,"EGP"),o(4),p(t.productDetails.ratingsAverage))},dependencies:[T,W,w,D],encapsulation:2})};export{E as PDetailsComponent};
